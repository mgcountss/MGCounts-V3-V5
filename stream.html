<link rel=stylesheet href="https://mgcounts.com/assets/css/odometer.css">
<script src="https://mgcounts.com/assets/js/odometer.js"></script>
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/countupjs/1.8.5/countUp.min.js"></script>
<style>
body {
    overflow: hidden;
  }
  .odometer,.odometer2 {
    font-family: 'Open Sans', sans-serif;
    color: #FFFFFF;
  }
  .nav, .likes {
      text-align: center;
    display: flex;
          flex-direction: row;
          flex: 10;
          column-gap: 0%;
  justify-content:space-evenly;
  }
  .close {
    text-align: center;
    display: flex;
          flex-direction: row;
          flex: 10;
          column-gap: 0%;
  justify-content:space-evenly;
  width: 99.61%;
  }
  h1 {
      color: #FFFFFF;
      font-family: 'Open Sans', sans-serif;
  }
  </style>
<div style="background-color: #222222; width: 100%; height: 100%;">
<div class="nav" style="height: 15%; background-color: #000000; border: solid #222222;">
    <div style="border: solid #FFFFFF; width: 20%; height: 90%;">
        <img src="https://yt3.ggpht.com/CU2eXGedDvJkNaxOqopQ-6tnuTcH9rE7g2BqdnmsH3PkDK5p6kRMX01QCTXr9RfcCo8PGnPD2Q=s88-c-k-c0x00ffffff-no-rj" style="float: left; height: 100%">
        <h1 class="odometer2" style="font-size: 25px; margin-top: 0%">Youtuber Wars</h1>
        <h1 class="odometer" id="odometer" style="color: #FFFFFF; font-size: 50px; margin-top: -2%"></h1>
    </div>
    <div style="border: solid #FFFFFF; width: 20%; height: 90%;">
        <img src="https://yt3.ggpht.com/ytc/AKedOLT8hrqF5hcJFqZ0KgSUzSZL15SL9Yd6BEEzlJgR3g=s88-c-k-c0x00ffffff-no-rj" style="float: left; height: 100%">
        <h1 class="odometer2" style="font-size: 25px; margin-top: 0%">Straight From MG</h1>
        <h1 class="odometer" id="odometer2" style="color: #FFFFFF; font-size: 50px; margin-top: -2%"></h1>
        </div>

        <div class="likes" style="border: solid #FFFFFF; width: 20%; height: 90%;">
            <div>
            <h1 class="odometer2" style="font-size: 25px; margin-top: 0%">Likes</h1>
            <h1 class="odometer" id="likes" style="color: #FFFFFF; font-size: 50px; margin-top: -2%"></h1>
</div>
            <div>
            <h1 class="odometer2" style="font-size: 25px; margin-top: 0%">Viewers</h1>
            <h1 class="odometer" id="views" style="color: #FFFFFF; font-size: 50px; margin-top: -2%"></h1>
        </div>
            <div>
            <h1 class="odometer2" style="font-size: 25px; margin-top: 0%">Dislikes</h1>
            <h1 class="odometer" id="dislikes" style="color: #FFFFFF; font-size: 50px; margin-top: -2%"></h1>
            </div>
        </div>
</div>

<div class="main" style="float: left; text-align: center;">
    <div class="sub" style="border: solid #FFFFFF; width: 500%; height: 75%; background-color: #262626; margin-left: -185%;"><br>
        <img id="img" src="https://mgcounts.com/assets/img/Old-YT.png" style="border-radius: 20px; height: 150px;">
        <h1 class="odometer2" id="title" style="font-size: 50px">Loading</h1>
    <h1 class="odometer" id="mainsubs" style="font-size: 100px; margin-top: -1%;"></h1>
    <h3 style="color: #FFFFFF; font-family: 'Open Sans', sans-serif; margin-top: -2%;">Subscribers</h3>
    </div>
    
            </div>





            <div class="chart" id="chart" style="margin-left: 50%;"></div>
            <div class="close" style="height: 8%; background-color: #000000; border: solid #222222;">
                <h1 style="font-size: 40px; margin-top: 0.5%;">Goal:‎‎‎‎‎‏‏‎ ‎‏‏‎ ‎‎‏‏‎</h1><h1 class="odometer" id="goal" style="font-size: 40px; margin-top: 0.5%;"></h1>
                <hr>
                <h1 style="font-size: 40px; margin-top: 0.5%;">Last Gain/Loss:‎‎‎‎‎‏‏‎ ‎‏‏‎ ‎‎‏‏‎</h1><h1 id="gain" style="font-size: 40px; margin-top: 0.5%;"></h1>
                <hr>
                <h1 style="font-size: 40px; margin-top: 0.5%;">Est Time Left:‎‎‎‎‎‏‏‎ ‎‏‏‎ ‎‎‏‏‎</h1><h1 id="other" style="font-size: 40px; margin-top: 0.5%;"></h1>
                </div>
</div>
<script>
    var params = new URLSearchParams(document.location.search.substring(1));
var id = params.get("id");
    var last = 0
    var ref = []
    var cur = 0
            async function GetStats() {
      let request = await fetch('https://beta.mixerno.space/api/youtube-subscriber-counter/channel/UCSgk1g0AZi9_759yfz-iIHg', { mode: "cors" })
      let data = await request.json().catch(() => {})
      if (!data) return;
      odometer2.innerHTML = data.userList[0].stats.subscriberCount
 }
  setInterval(GetStats, 60000)
  GetStats()
  async function GetStats4() {
      let request = await fetch('https://api.mgcounts.com/youtube/subscribers/UCxHN85i2IpCdleh8Gkv5hIA', { mode: "cors" })
      let data = await request.json().catch(() => {})
      if (!data) return;
      odometer.innerHTML = data.subscribers
 }
  setInterval(GetStats4, 60000)
  GetStats4()
  async function GetStats2() {
      let request = await fetch('https://beta.mixerno.space/api/youtube-subscriber-counter/channel/UCIPPMRA040LQr5QPyJEbmXA', { mode: "cors" })
      let data = await request.json().catch(() => {})
      if (!data) return;
      mainsubs.innerHTML = data.userList[0].stats.subscriberCount
      title.innerHTML = data.userList[0].user.name
      document.getElementById('img').src = data.userList[0].user.avatar.medium.url
      if (chart.series[0].points.length == 1500) chart.series[0].data[0].remove();
          chart.series[0].addPoint([Date.now(), Math.floor(data.userList[0].stats.subscriberCount)])
          function GetGoal(count) {
  if (count < 10) return 10; var x1 = Math.floor(Math.log10(count)); var x2 = Math.ceil(count / 10 ** x1); var x3 = x2 * 10 ** x1; var goal = x3 - count; return goal
}
goal.innerHTML = GetGoal(data.userList[0].stats.subscriberCount)

var neww = data.userList[0].stats.subscriberCount-last

if (ref.length >= 10) {
    var ref2 = ref
    delete ref2[0]
    ref2 = ref2.filter(function (el) {
      return el != null;
    });
    ref = ref2
}
newww = neww
if (neww <= 0) {
neww = neww
} else {
neww = "+"+neww
}
gain.innerHTML = neww
last = data.userList[0].stats.subscriberCount
ref.push(newww)


var total = 0;
for(var i = 0; i < ref.length; i++) {
    total += ref[i];
}

var avg = total / ref.length;

time = Math.floor(20000000 - data.userList[0].stats.subscriberCount)
  time = time / avg
   //.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,')
  console.log(time)
  cur = time

 }
  setInterval(GetStats2, 3000)
  GetStats2()

setInterval(function() {
    cur--
    other.innerHTML = Math.floor(cur).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,')+" Seconds."
},1000)



  var textBright = "#262626"
    var lineColor = "#262626"
    var maxPoints = 20000;
    var tran = "#262626"

    
    var chart = new Highcharts.chart({
      chart: {
          renderTo: 'chart',
          type: 'spline',
            zoomType: 'x',
            backgroundColor: 'transparent',
            plotBorderColor: 'transparent'
      },
      title: {
          text: ' '
      },
      xAxis: {
          type: 'datetime',
          tickPixelInterval: 500,
            labels: {
        enabled: false
    },
            lineColor: lineColor,
            minorGridLineColor: '#262626',
            tickColor: lineColor,
            title: {
                style: {
                    color: textBright
                }
            }
      },
      yAxis: {
          title: {
              text: ''
          },
            gridLineColor: textBright,
            labels: {
        enabled: false
    },
            lineColor: lineColor,
            minorGridLineColor: '#262626',
            tickColor: lineColor
      },
      credits: {
          enabled: true,
          text: "MGCounts"
      },
    
      series: [{
        showInLegend: false,
         name: 'Subscribers',
        marker: { enabled: false },
        color: '#262626',
        lineColor: '#FFFFFF'
      }]
    });

    async function GetStats3() {
      let request = await fetch('https://mixerno.space/api/yt/video/'+id+'', { mode: "cors" })
      let data = await request.json().catch(() => {})
      if (!data) return;
      likes.innerHTML = data.items[0].statistics.likeCount
      views.innerHTML = data.items[0].liveStreamingDetails.concurrentViewers
      dislikes.innerHTML = data.items[0].statistics.dislikeCount
 }
  setInterval(GetStats3, 20000)
  GetStats3()

  /* 
  var options = {
  useEasing : true, 
  useGrouping : true, 
  separator : ',', 
  decimal : '.', 
  prefix: '',
  suffix: ''
};

    var demo = new CountUp("subcount_"+cnb+"", lol[q], data[q].messages, 0, 8, options);
    demo.start()
    */
</script>
